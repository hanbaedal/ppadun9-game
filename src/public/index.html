<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹ ë˜ë‚˜ì¸ ê²Œì„ ìš´ì˜ - ë¹ ë˜ë‚˜ì¸ ê²Œì„</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 20px;
            padding-top: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.2rem;
            color: #333;
        }

        .page-title {
            margin: 0;
            font-size: 1.8em;
            color: #0066cc;
            font-weight: 700;
            text-align: center;
            margin-bottom: 10px;
        }

        .date-display {
            font-size: 14px;
            color: #666;
            text-align: center;
            margin-bottom: 8px;
        }

        /* ê²Œì„ ìš´ì˜ ì„¹ì…˜ */
        .game-section {
            display: block;
        }

        .game-selection-container {
            margin: 8px 0;
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 8px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .game-selection-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .game-selection-table th,
        .game-selection-table td {
            padding: 6px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
            font-size: 14px;
        }

        .game-selection-table th {
            background-color: #f0f0f0;
            font-weight: 600;
            color: #333;
            text-transform: uppercase;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .game-selection-table tbody tr {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .game-selection-table tbody tr:hover {
            background-color: #f8f9fa;
        }

        .game-selection-table tbody tr.selected {
            background-color: #e8f5e9;
            border-left: 4px solid #28a745;
        }

        .game-row {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .game-row:hover {
            background-color: #f8f9fa;
        }

        .game-row.selected {
            background-color: #e8f5e9;
            border-left: 4px solid #28a745;
        }

        .game-number {
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }

        .game-matchup {
            font-weight: 500;
            color: #333;
        }

        .game-status {
            font-size: 12px;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
            border: 1px solid #ddd;
        }

        .status-normal {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .status-delayed {
            background-color: #f8d7da;
            color: #721c24;
        }

        .status-before {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-ongoing {
            background-color: #d4edda;
            color: #155724;
        }

        .status-ended {
            background-color: #f8d7da;
            color: #721c24;
        }

        .select-game-btn {
            padding: 8px 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.2s;
            width: 100px;
        }

        .select-game-btn:hover {
            background-color: #0056b3;
        }

        .select-game-btn.selected {
            background-color: #28a745;
        }

        .select-game-btn.disabled {
            background-color: #dc3545;
            color: #fff;
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* ë°°íŒ… ì„¹ì…˜ */
        .betting-section {
            margin-top: 10px;
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .betting-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background-color: white;
            border-radius: 8px;
            margin-bottom: 12px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.15);
        }

        .betting-title {
            padding: 8px 20px;
            background-color: #28a745;
            color: white;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            width: 150px;
            text-align: center;
            flex-shrink: 0;
        }

        .betting-time {
            font-size: 16px;
            color: #333;
            padding: 12px 20px;
            background-color: #fff;
            border: 2px solid #ddd;
            border-radius: 8px;
            width: 500px;
            text-align: center;
            flex-shrink: 0;
            font-weight: 500;
            white-space: nowrap;
        }

        .clickable-game-info {
            cursor: pointer;
            transition: all 0.2s;
            border-color: #007bff;
            border-width: 2px;
            background-color: #f8f9ff;
        }

        .clickable-game-info:hover {
            background-color: #e3f2fd;
            border-color: #0056b3;
            box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3);
            transform: translateY(-2px);
        }

        .game-type-display {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 20px;
        }

        .game-type-label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .game-type-value {
            font-size: 16px;
            color: #28a745;
            font-weight: 600;
            padding: 6px 12px;
            background-color: #f8f9fa;
            border: 1px solid #28a745;
            border-radius: 6px;
        }

        .select-game-btn.selected {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        .select-game-btn.selected:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        .betting-btn {
            padding: 8px 16px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            width: 120px;
            text-align: center;
            flex-shrink: 0;
        }

        .betting-btn:hover:not(:disabled) {
            background-color: #218838;
        }

        .betting-btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        .betting-btn.stop {
            background-color: #dc3545;
        }

        .betting-btn.stop:hover:not(:disabled) {
            background-color: #c82333;
        }

        .radio-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 8px 18px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            transition: all 0.2s;
            font-size: 14px;
        }

        .radio-label:hover {
            background-color: #f8f9fa;
            border-color: #28a745;
        }

        .radio-label input[type="radio"]:checked + span {
            color: #28a745;
            font-weight: 500;
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        /* ëª¨ë°”ì¼ì—ì„œ ëª¨ë‹¬ ìµœì í™” */
        @media (max-width: 768px) {
            .modal-content {
                padding: 20px;
                max-width: 95%;
                width: 95%;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .game-selection-modal {
                max-width: 95%;
                width: 95%;
            }
            
            .modal-header {
                margin-bottom: 15px;
                padding-bottom: 10px;
            }
            
            .modal-title {
                font-size: 1.2rem;
                margin-bottom: 15px;
            }
        }

        .game-selection-modal {
            max-width: 900px;
            width: 95%;
            text-align: left;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: #333;
        }

        .modal-body {
            max-height: 70vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 1.5em;
            font-weight: 700;
            color: #333;
            margin-bottom: 20px;
        }

        .modal-message {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 100px;
        }

        .modal-btn-primary {
            background-color: #28a745;
            color: white;
        }

        .modal-btn-primary:hover {
            background-color: #218838;
            transform: translateY(-2px);
        }

        .modal-btn-secondary {
            background-color: #6c757d;
            color: white;
        }

        .modal-btn-secondary:hover {
            background-color: #5a6268;
            transform: translateY(-2px);
        }

        /* ìƒíƒœ í‘œì‹œ */
        .status-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-waiting {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-active {
            background-color: #d4edda;
            color: #155724;
        }

        .status-stopped {
            background-color: #f8d7da;
            color: #721c24;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
                margin: 5px;
            }
            
            .page-title {
                font-size: 1.5rem;
                margin-bottom: 10px;
            }
            
            .date-display {
                font-size: 14px;
                margin-bottom: 10px;
            }
            
            .game-selection-container {
                margin: 10px 0;
                padding: 10px;
            }
            
            .game-selection-container h4 {
                font-size: 1.1rem;
                margin-bottom: 15px;
            }
            
            .game-selection-table {
                font-size: 12px;
            }
            
            .game-selection-table th,
            .game-selection-table td {
                padding: 6px 4px;
                font-size: 11px;
            }
            
            .betting-section {
                margin-top: 15px;
                padding: 15px;
            }
            
            .betting-section h4 {
                font-size: 1.1rem;
            }

            .betting-item {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .betting-title {
                font-size: 14px;
                padding: 6px 12px;
                width: 120px;
            }
            
            .betting-time {
                font-size: 14px;
                padding: 8px 12px;
                width: 100%;
                max-width: none;
                min-height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .betting-btn {
                width: 100%;
                padding: 12px;
                font-size: 14px;
            }

            .radio-group {
                justify-content: center;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .radio-label {
                padding: 6px 12px;
                font-size: 12px;
                min-width: 60px;
                text-align: center;
            }
            
            .game-type-display {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .game-type-label,
            .game-type-value {
                font-size: 14px;
            }
        }

        /* ìŠ¤ë§ˆíŠ¸í° ìµœì í™” (ì‘ì€ í™”ë©´) - í•œ í˜ì´ì§€ì— ëª¨ë“  ë‚´ìš© í‘œì‹œ */
        @media (max-width: 480px) {
            .container {
                padding: 5px;
                margin: 2px;
            }
            
            .page-title {
                font-size: 1.1rem;
                margin-bottom: 5px;
                line-height: 1.2;
            }
            
            .date-display {
                font-size: 12px;
                margin-bottom: 5px;
            }
            
            .game-selection-container {
                margin: 5px 0;
                padding: 5px;
            }
            
            .game-selection-container h4 {
                font-size: 0.9rem;
                margin-bottom: 8px;
            }
            
            .game-selection-table {
                font-size: 10px;
            }
            
            .game-selection-table th,
            .game-selection-table td {
                padding: 3px 1px;
                font-size: 9px;
            }
            
            .betting-section {
                margin-top: 8px;
                padding: 8px;
            }
            
            .betting-section h4 {
                font-size: 0.9rem;
                margin-bottom: 8px;
            }
            
            .betting-item {
                padding: 6px;
                margin-bottom: 6px;
                gap: 5px;
            }
            
            .betting-title {
                font-size: 11px;
                padding: 3px 8px;
                width: 80px;
            }
            
            .betting-time {
                font-size: 10px;
                padding: 4px 8px;
                width: 100%;
                max-width: none;
                min-height: 35px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .betting-btn {
                padding: 8px;
                font-size: 11px;
            }
            
            .radio-group {
                gap: 1px;
                flex-wrap: nowrap;
                justify-content: space-between;
                width: 100%;
            }
            
            .radio-label {
                padding: 2px 2px;
                font-size: 10px;
                min-width: 16px;
                min-height: 12px;
                flex: 1;
                text-align: center;
                margin: 0 1px;
            }
            
            .radio-label span {
                font-size: 10px;
                white-space: nowrap;
            }
            
            .game-type-display {
                gap: 2px;
                flex-direction: row;
                align-items: center;
            }
            
            .game-type-label,
            .game-type-value {
                font-size: 10px;
            }
            
            /* ë„¤ë¹„ê²Œì´ì…˜ ë°” ìµœì í™” */
            .navbar-brand {
                font-size: 0.9rem;
            }
            
            .navbar-text {
                font-size: 11px;
            }
            
            .btn-sm {
                font-size: 10px;
                padding: 4px 8px;
            }
        }

        /* ê·¹ì†Œí˜• ìŠ¤ë§ˆíŠ¸í° ìµœì í™” (ë§¤ìš° ì‘ì€ í™”ë©´) */
        @media (max-width: 360px) {
            .container {
                padding: 3px;
                margin: 1px;
            }
            
            .page-title {
                font-size: 1rem;
                margin-bottom: 3px;
            }
            
            .date-display {
                font-size: 11px;
                margin-bottom: 3px;
            }
            
            .game-selection-container {
                margin: 3px 0;
                padding: 3px;
            }
            
            .game-selection-container h4 {
                font-size: 0.8rem;
                margin-bottom: 6px;
            }
            
            .game-selection-table {
                font-size: 9px;
            }
            
            .game-selection-table th,
            .game-selection-table td {
                padding: 2px 1px;
                font-size: 8px;
            }
            
            .betting-section {
                margin-top: 6px;
                padding: 6px;
            }
            
            .betting-section h4 {
                font-size: 0.8rem;
                margin-bottom: 6px;
            }
            
            .betting-item {
                padding: 4px;
                margin-bottom: 4px;
                gap: 3px;
            }
            
            .betting-title {
                font-size: 10px;
                padding: 2px 6px;
                width: 70px;
            }
            
            .betting-time {
                font-size: 9px;
                padding: 3px 6px;
                min-height: 30px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .betting-btn {
                padding: 6px;
                font-size: 10px;
            }
            
            .radio-group {
                gap: 0px;
                flex-wrap: nowrap;
                justify-content: space-between;
                width: 100%;
            }
            
            .radio-label {
                padding: 1px 1px;
                font-size: 9px;
                min-width: 18px;
                min-height: 16px;
                flex: 1;
                text-align: center;
                margin: 0 0px;
            }
            
            .radio-label span {
                font-size: 9px;
                white-space: nowrap;
            }
            
            .game-type-display {
                gap: 1px;
            }
            
            .game-type-label,
            .game-type-value {
                font-size: 9px;
            }
        }

        /* ì‚¼ì„± ìŠ¤ë§ˆíŠ¸í° ê°€ë¡œ ëª¨ë“œ ìµœì í™” */
        @media (max-width: 768px) and (orientation: landscape) {
            .container {
                padding: 8px;
            }
            
            .page-title {
                font-size: 1.2rem;
                margin-bottom: 8px;
            }
            
            .game-selection-container {
                margin: 8px 0;
                padding: 8px;
            }
            
            .betting-section {
                margin-top: 10px;
                padding: 12px;
            }
            
            .betting-item {
                padding: 10px;
                margin-bottom: 10px;
            }
            
            .radio-group {
                flex-direction: row;
                justify-content: space-around;
                gap: 10px;
            }
        }

        /* í„°ì¹˜ ì¹œí™”ì  ìš”ì†Œ í¬ê¸° ì¡°ì • */
        @media (max-width: 768px) {
            .betting-btn,
            .select-game-btn,
            .modal-close {
                min-height: 44px;
                min-width: 44px;
            }
            
            .radio-label {
                min-height: 44px;
                min-width: 60px;
            }
            
            .clickable-game-info {
                min-height: 44px;
            }
        }
    </style>
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <div class="navbar-nav me-auto" id="userInfo">
                <span class="navbar-text me-3" id="userName">
                    <i class="fas fa-user-circle me-2"></i>ìš´ì˜ì
                </span>
            </div>
            <button class="btn btn-outline-danger btn-sm" onclick="logout()">
                <i class="fas fa-sign-out-alt me-2"></i>ë¡œê·¸ì•„ì›ƒ
            </button>
        </div>
    </nav>

    <div class="container">
        <h1 class="page-title">ë¹ ë˜ë‚˜ì¸ ê²Œì„ ìš´ì˜ ì‹œìŠ¤í…œ</h1>
        <div class="date-display" id="dateDisplay">ë‚ ì§œ ë¡œë”© ì¤‘...</div>

        <!-- ê²Œì„ ì„ íƒ ì„¹ì…˜ -->
        <div class="game-section">
            <div class="game-selection-container">
                <h4 class="mb-3"><i class="fas fa-list me-2"></i>ì˜¤ëŠ˜ì˜ ê²½ê¸°</h4>
                <table class="game-selection-table" id="gameSelectionTable">
                    <thead>
                        <tr>
                            <th>ê²½ê¸°ë²ˆí˜¸</th>
                            <th>ë§¤ì¹˜ì—…</th>
                            <th>ê²½ê¸°ì‹œê°„</th>
                            <th>ê²½ê¸°ìƒí™©</th>
                            <th>ì§„í–‰ìƒíƒœ</th>
                            <th>ì„ íƒ</th>
                        </tr>
                    </thead>
                    <tbody id="gameSelectionTableBody">
                        <!-- ê²½ê¸° ì„ íƒ í–‰ë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </tbody>
                </table>
            </div>
            </div>

        <!-- ë°°íŒ… ìš´ì˜ ì„¹ì…˜ -->
        <div class="betting-section" id="bettingSection" style="display: none;">
                
            <!-- ì„ íƒëœ ê²Œì„ ì •ë³´ì™€ ê²Œì„ í˜•íƒœ (í´ë¦­ ê°€ëŠ¥) -->
                <div class="betting-item">
                <div class="betting-title">ì„ íƒëœ ê²½ê¸°</div>
                <div class="betting-time clickable-game-info" id="selectedGameInfo" onclick="handleGameSelectionClick()" style="cursor: pointer;">
                    ê²Œì„ì„ ì„ íƒí•´ì£¼ì„¸ìš”
                </div>
                <div class="game-type-display">
                    <span class="game-type-label">ê²Œì„ í˜•íƒœ:</span>
                    <span class="game-type-value">íƒ€ì</span>
                    </div>
                </div>

            <!-- ë°°íŒ… ì‹œì‘ -->
                <div class="betting-item">
                <div class="betting-title">ë°°íŒ… ì‹œì‘</div>
                <button class="betting-btn" id="startBetting" disabled>
                    <i class="fas fa-play me-2"></i>ë°°íŒ… ì‹œì‘
                </button>
                <div class="betting-time" id="bettingTime">-</div>
                </div>

            <!-- ë°°íŒ… ì¤‘ì§€ -->
                <div class="betting-item">
                <div class="betting-title">ë°°íŒ… ì¤‘ì§€</div>
                <button class="betting-btn stop" id="stopBetting" disabled>
                    <i class="fas fa-stop me-2"></i>ë°°íŒ… ì¤‘ì§€
                </button>
                <div class="betting-time" id="stopTime">-</div>
                </div>

            <!-- ì˜ˆì¸¡ ê²°ê³¼ ì„ íƒ -->
                <div class="betting-item">
                <div class="betting-title">ì˜ˆì¸¡ ê²°ê³¼</div>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="prediction" value="1base" disabled>
                            <span>1ë£¨</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="prediction" value="2base" disabled>
                            <span>2ë£¨</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="prediction" value="3base" disabled>
                            <span>3ë£¨</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="prediction" value="homerun" disabled>
                            <span>í™ˆëŸ°</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="prediction" value="out" disabled>
                            <span>ì•„ì›ƒ</span>
                        </label>
                    </div>
                </div>

            <!-- ë‹¤ìŒ íƒ€ì ì¤€ë¹„ -->
                <div class="betting-item">
                <div class="betting-title">ë‹¤ìŒ ë‹¨ê³„</div>
                <button class="betting-btn" id="nextBatterBtn" disabled>
                    <i class="fas fa-forward me-2"></i>ë‹¤ìŒ íƒ€ì
                </button>
            </div>
        </div>
    </div>

    <!-- ì»¤ìŠ¤í…€ ëª¨ë‹¬ -->
    <div id="customModal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title" id="customModalTitle">ì•Œë¦¼</h3>
            <p class="modal-message" id="customModalMessage">ë©”ì‹œì§€</p>
            <div class="modal-buttons" id="customModalButtons">
                <button class="modal-btn modal-btn-primary" onclick="closeCustomModal()">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- ê²½ê¸°ì„ íƒ ëª¨ë‹¬ -->
    <div id="gameSelectionModal" class="modal">
        <div class="modal-content game-selection-modal">
            <div class="modal-header">
                <h3 class="modal-title">ê²½ê¸° ì„ íƒ</h3>
                <button class="modal-close" onclick="closeGameSelectionModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="game-selection-container">
                    <h5 class="mb-3"><i class="fas fa-list me-2"></i>ì˜¤ëŠ˜ì˜ ê²½ê¸°</h5>
                    <table class="game-selection-table" id="modalGameSelectionTable">
                        <thead>
                            <tr>
                                <th>ê²½ê¸°ë²ˆí˜¸</th>
                                <th>ë§¤ì¹˜ì—…</th>
                                <th>ê²½ê¸°ì‹œê°„</th>
                                <th>ê²½ê¸°ìƒí™©</th>
                                <th>ì§„í–‰ìƒíƒœ</th>
                                <th>ì„ íƒ</th>
                            </tr>
                        </thead>
                        <tbody id="modalGameSelectionTableBody">
                            <!-- ê²½ê¸° ì„ íƒ í–‰ë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedGame = null;
        let currentUser = null;
        let bettingStartTime = null;
        let bettingStopTime = null;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™” (ì¤‘ë³µ ë°©ì§€ë¥¼ ìœ„í•´ ì œê±°)
        // document.addEventListener('DOMContentLoaded', function() {
        //     checkLoginStatus();
        //     updateDate();
        //     loadGames();
        //     setupEventListeners();
        // });

        // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
        function checkLoginStatus() {
            const storedUser = localStorage.getItem('currentUser');
            if (!storedUser) {
                // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš° ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
                window.location.href = 'operator-management.html';
                return;
            }
            
            try {
                currentUser = JSON.parse(storedUser);
                document.getElementById('userName').innerHTML = `<i class="fas fa-user-circle me-2"></i>ìš´ì˜ì : ${currentUser.name}(${currentUser.username})`;
            } catch (error) {
                console.error('ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:', error);
                localStorage.removeItem('currentUser');
                window.location.href = 'operator-management.html';
            }
        }

        // ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬
        async function handleLogout() {
            try {
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬
                    localStorage.removeItem('currentUser');
                    currentUser = null;
                
                    showCustomModal('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
                    setTimeout(() => {
                    window.location.href = 'operator-management.html';
                    }, 1500);
            } catch (error) {
                console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error);
                window.location.href = 'operator-management.html';
            }
        }

        // ë‚ ì§œ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateDate() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            const dateStr = `${year}ë…„ ${month}ì›” ${day}ì¼`;
            document.getElementById('dateDisplay').textContent = dateStr;
        }

        // ê²Œì„ ë°ì´í„° ë¡œë“œ
        async function loadGames() {
            try {
                const response = await fetch('/api/team-games');
                if (!response.ok) {
                    throw new Error('ê²Œì„ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                const games = await response.json();
                const tableBody = document.getElementById('gameTableBody');
                tableBody.innerHTML = '';
                
                games.forEach(game => {
                    const row = document.createElement('tr');
                    row.setAttribute('data-game', game.gameNumber);
                    row.setAttribute('data-date', game.date);
                    
                    const isSelected = game.isSelected || false;
                    const selectBtnClass = isSelected ? 'select-game-btn selected' : 'select-game-btn';
                    const selectBtnText = isSelected ? 'ì„ íƒë¨' : 'ì„ íƒ';
                    const selectBtnDisabled = isSelected ? 'disabled' : '';
                    
                    row.innerHTML = `
                        <td>${game.gameNumber}ê²½ê¸°</td>
                        <td>${game.team1} vs ${game.team2}</td>
                        <td>${game.time}</td>
                        <td>${game.status}</td>
                        <td>${game.gameType}</td>
                        <td>${game.progress}</td>
                        <td>
                            <button class="${selectBtnClass}" ${selectBtnDisabled} onclick="selectGame('${game.date}', ${game.gameNumber})">
                                ${selectBtnText}
                            </button>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                console.log('í…Œì´ë¸”ì— ì¶”ê°€ëœ í–‰ ìˆ˜:', tableBody.children.length);
                
                // ğŸ¯ ìë™ ê²½ê¸° ì„ íƒ ë¡œì§ ì¶”ê°€
                await autoSelectAssignedGame();
                
                // ğŸ¯ "ì˜¤ëŠ˜ì˜ ê²½ê¸°" ëª¨ë‹¬ ì™„ì „íˆ ìˆ¨ê¸°ê¸°
                hideGameSelectionModal();
                
            } catch (error) {
                console.error('ê²Œì„ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ğŸ¯ í• ë‹¹ëœ ê²½ê¸° ìë™ ì„ íƒ í•¨ìˆ˜
        async function autoSelectAssignedGame() {
            try {
                // ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ í™•ì¸
                const userInfo = localStorage.getItem('operatorUserInfo');
                if (!userInfo) {
                    console.log('ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ìë™ ì„ íƒ ê±´ë„ˆë›°ê¸°');
                    return;
                }
                
                const user = JSON.parse(userInfo);
                console.log('ìë™ ê²½ê¸° ì„ íƒ ì‹œì‘ - ì‚¬ìš©ì:', user.username);
                
                // operate-member ì»¬ë ‰ì…˜ì—ì„œ í• ë‹¹ëœ ê²½ê¸° ì •ë³´ ì¡°íšŒ
                const response = await fetch(`/api/operator/${user.username}/assigned-game`);
                if (!response.ok) {
                    console.log('í• ë‹¹ëœ ê²½ê¸° ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨');
                    return;
                }
                
                const assignedData = await response.json();
                console.log('í• ë‹¹ëœ ê²½ê¸° ì •ë³´:', assignedData);
                
                if (!assignedData.assignedGame || !assignedData.assignedGameDate) {
                    console.log('í• ë‹¹ëœ ê²½ê¸° ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                // í• ë‹¹ëœ ê²½ê¸° ë²ˆí˜¸
                const assignedGameNumber = assignedData.assignedGame;
                const assignedDate = assignedData.assignedGameDate;
                
                console.log(`í• ë‹¹ëœ ê²½ê¸°: ${assignedGameNumber}ê²½ê¸°, ë‚ ì§œ: ${assignedDate}`);
                
                // ğŸ¯ assignedGame ìœ íš¨ì„± ê²€ì‚¬ (1~5 ì‚¬ì´ë§Œ í—ˆìš©)
                if (!assignedGameNumber || assignedGameNumber < 1 || assignedGameNumber > 5) {
                    console.error(`ìœ íš¨í•˜ì§€ ì•Šì€ í• ë‹¹ëœ ê²½ê¸° ë²ˆí˜¸: ${assignedGameNumber}`);
                    alert('ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ê¸° í• ë‹¹ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.');
                    
                    // ë¡œê·¸ì¸ ì •ë³´ ì œê±°
                    localStorage.removeItem('operatorUserInfo');
                    localStorage.removeItem('loginStatus');
                    
                    // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                    window.location.href = '/operator-register.html';
                    return;
                }
                
                // ì˜¤ëŠ˜ ë‚ ì§œì™€ í• ë‹¹ëœ ë‚ ì§œ ë¹„êµ (í•œêµ­ ì‹œê°„ ê¸°ì¤€)
                const now = new Date();
                const koreanTime = new Date(now.getTime() + (9 * 60 * 60 * 1000)); // UTC+9
                const today = koreanTime.toISOString().split('T')[0];
                
                console.log(`UTC ì‹œê°„: ${now.toISOString()}`);
                console.log(`í•œêµ­ ì‹œê°„: ${koreanTime.toISOString()}`);
                console.log(`ì˜¤ëŠ˜ ë‚ ì§œ (í•œêµ­): ${today}, í• ë‹¹ëœ ë‚ ì§œ: ${assignedDate}`);
                
                if (assignedDate !== today) {
                    console.log('í• ë‹¹ëœ ë‚ ì§œê°€ ì˜¤ëŠ˜ì´ ì•„ë‹™ë‹ˆë‹¤.');
                    return;
                }
                
                console.log('ë‚ ì§œ ë¹„êµ í†µê³¼ - ìë™ ì„ íƒ ì§„í–‰');
                
                // í•´ë‹¹ ê²½ê¸° ìë™ ì„ íƒ
                const selectResult = await autoSelectGame(today, assignedGameNumber);
                if (selectResult) {
                    console.log(`${assignedGameNumber}ê²½ê¸° ìë™ ì„ íƒ ì™„ë£Œ`);
                    
                    // UI ì—…ë°ì´íŠ¸ ì „ì— ì ì‹œ ëŒ€ê¸° (DOMì´ ì™„ì „íˆ ë¡œë“œë˜ë„ë¡)
                    setTimeout(() => {
                        updateGameSelectionUI(assignedGameNumber, true);
                        showSelectedGameInfo(assignedGameNumber);
                        
                        // ğŸ¯ "ì˜¤ëŠ˜ì˜ ê²½ê¸°" ëª¨ë‹¬ ìˆ¨ê¸°ê³  "ì„ íƒí•œ ê²½ê¸°" ë©”ë‰´ í‘œì‹œ
                        hideGameSelectionModal();
                        showBettingSection();
                        
                        console.log('UI ì—…ë°ì´íŠ¸ ì™„ë£Œ');
                    }, 100);
                }
                
            } catch (error) {
                console.error('ìë™ ê²½ê¸° ì„ íƒ ì˜¤ë¥˜:', error);
            }
        }

        // ğŸ¯ ê²Œì„ ì„ íƒ UI ì—…ë°ì´íŠ¸
        function updateGameSelectionUI(gameNumber, isSelected) {
            try {
                console.log(`ê²Œì„ ì„ íƒ UI ì—…ë°ì´íŠ¸ ì‹œì‘: ${gameNumber}ê²½ê¸°, ì„ íƒë¨: ${isSelected}`);
                
                // ëª¨ë“  ê²½ê¸° ì„ íƒ ë²„íŠ¼ì„ ë¹„í™œì„±í™” (í• ë‹¹ë˜ì§€ ì•Šì€ ê²½ê¸°ë“¤)
                const allGameRows = document.querySelectorAll('#gameSelectionTableBody tr');
                allGameRows.forEach((row, index) => {
                    const selectBtn = row.querySelector('.select-game-btn');
                    if (selectBtn) {
                        const currentGameNumber = index + 1; // 1ë¶€í„° ì‹œì‘
                        
                        if (currentGameNumber === gameNumber) {
                            // í• ë‹¹ëœ ê²½ê¸°: ì„ íƒë¨ ìƒíƒœë¡œ í™œì„±í™”
                            selectBtn.textContent = 'ì„ íƒë¨';
                            selectBtn.className = 'select-game-btn selected';
                            selectBtn.disabled = false; // í´ë¦­ ê°€ëŠ¥ (ì„ íƒ í•´ì œìš©)
                            console.log(`${currentGameNumber}ê²½ê¸°: ì„ íƒë¨ ìƒíƒœë¡œ ì„¤ì •`);
                        } else {
                            // í• ë‹¹ë˜ì§€ ì•Šì€ ê²½ê¸°: ë¹„í™œì„±í™”
                            selectBtn.textContent = 'ë¹„í™œì„±í™”';
                            selectBtn.className = 'select-game-btn disabled';
                            selectBtn.disabled = true;
                            console.log(`${currentGameNumber}ê²½ê¸°: ë¹„í™œì„±í™” ìƒíƒœë¡œ ì„¤ì •`);
                        }
                    }
                });
                
                console.log(`ê²Œì„ ì„ íƒ UI ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${gameNumber}ê²½ê¸°`);
                
            } catch (error) {
                console.error('ê²Œì„ ì„ íƒ UI ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
            }
        }

        // ğŸ¯ ì„ íƒëœ ê²½ê¸° ì •ë³´ í‘œì‹œ (ìˆ˜ë™ ì„ íƒê³¼ ë™ì¼í•œ í˜•íƒœ)
        function showSelectedGameInfo(gameNumber) {
            try {
                console.log('ìë™ ì„ íƒëœ ê²½ê¸° ì •ë³´ í‘œì‹œ ì‹œì‘:', gameNumber);
                
                // ì„ íƒëœ ê²½ê¸° ì •ë³´ ì—…ë°ì´íŠ¸
                const selectedGameInfo = document.getElementById('selectedGameInfo');
                if (selectedGameInfo) {
                    // ê²½ê¸° ì •ë³´ í…ìŠ¤íŠ¸ ì„¤ì • - ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ì°¾ê¸°
                    let gameRow = document.querySelector(`[data-game="${gameNumber}"]`);
                    
                    // data-game ì†ì„±ìœ¼ë¡œ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë©´ í…Œì´ë¸” í–‰ì—ì„œ ì°¾ê¸°
                    if (!gameRow) {
                        const tableBody = document.getElementById('gameSelectionTableBody');
                        if (tableBody) {
                            const rows = tableBody.querySelectorAll('tr');
                            // ì„ íƒëœ ê²½ê¸° ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ” í–‰ ì°¾ê¸°
                            for (let i = 0; i < rows.length; i++) {
                                const firstCell = rows[i].querySelector('td:first-child');
                                if (firstCell && firstCell.textContent.includes(`${gameNumber}ê²½ê¸°`)) {
                                    gameRow = rows[i];
                                    console.log(`ê²½ê¸° ${gameNumber}í–‰ ì°¾ìŒ:`, gameRow);
                                    break;
                                }
                            }
                        }
                    }
                    
                    if (gameRow) {
                        const cells = gameRow.querySelectorAll('td');
                        if (cells.length >= 6) {
                            const teamMatchup = cells[1]?.textContent || `${gameNumber}ê²½ê¸°`;
                            const time = cells[2]?.textContent || '';
                            const status = cells[3]?.textContent || '';
                            const gameType = cells[4]?.textContent || '';
                            const progress = cells[5]?.textContent || '';
                            
                            // ğŸ¯ "ì„ íƒë¨" í…ìŠ¤íŠ¸ ì œê±°í•˜ê³  ê¹”ë”í•˜ê²Œ í‘œì‹œ
                            // ê° ì…€ì˜ í…ìŠ¤íŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ ê³µë°±ê³¼ "ì„ íƒë¨" í…ìŠ¤íŠ¸ ì œê±°
                            const cleanTeamMatchup = teamMatchup.trim();
                            const cleanTime = time.trim();
                            const cleanStatus = status.trim();
                            const cleanGameType = gameType.trim();
                            const cleanProgress = progress.replace(/ì„ íƒë¨/g, '').trim();
                            
                            const gameInfoText = `${gameNumber}ê²½ê¸° : ${cleanTeamMatchup}, ${cleanTime} ~ ${cleanStatus}, ${cleanGameType}, ${cleanProgress}`;
                            selectedGameInfo.textContent = gameInfoText;
                            console.log('ê²½ê¸° ì •ë³´ ì„¤ì •ë¨ (ì •ë¦¬ë¨):', gameInfoText);
                        } else {
                            // ê¸°ë³¸ ì •ë³´ë¡œ ì„¤ì • (ì„ íƒë¨ í…ìŠ¤íŠ¸ ì œê±°)
                            selectedGameInfo.textContent = `${gameNumber}ê²½ê¸° : í•œí™” vs NC, 18:00 ~ ì§„í–‰ì¤‘, ì •ìƒê²Œì„, ê²½ê¸°ì¤‘`;
                            console.log('ê¸°ë³¸ ê²½ê¸° ì •ë³´ë¡œ ì„¤ì •ë¨');
                        }
                        
                        selectedGameInfo.className = 'betting-time';
                        selectedGameInfo.onclick = null; // í´ë¦­ ì´ë²¤íŠ¸ ì œê±°
                        selectedGameInfo.style.cursor = 'default';
                    } else {
                        // ê²½ê¸° í–‰ì„ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë©´ ê¸°ë³¸ ì •ë³´ë¡œ ì„¤ì • (ì„ íƒë¨ í…ìŠ¤íŠ¸ ì œê±°)
                        selectedGameInfo.textContent = `${gameNumber}ê²½ê¸° : í•œí™” vs NC, 18:00 ~ ì§„í–‰ì¤‘, ì •ìƒê²Œì„, ê²½ê¸°ì¤‘`;
                        selectedGameInfo.className = 'betting-time';
                        selectedGameInfo.onclick = null;
                        selectedGameInfo.style.cursor = 'default';
                        console.log('ê²½ê¸° í–‰ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ ê¸°ë³¸ ì •ë³´ë¡œ ì„¤ì •ë¨');
                    }
                }
                
                // ê²Œì„ í˜•íƒœ í‘œì‹œ (ê¸°ë³¸ê°’: íƒ€ì)
                const gameTypeValue = document.querySelector('.game-type-value');
                if (gameTypeValue) {
                    gameTypeValue.textContent = 'íƒ€ì';
                    console.log('ê²Œì„ í˜•íƒœ ì„¤ì •ë¨: íƒ€ì');
                }
                
                // ë°°íŒ… ì‹œì‘ ë²„íŠ¼ í™œì„±í™”
                const startBettingBtn = document.getElementById('startBetting');
                if (startBettingBtn) {
                    startBettingBtn.disabled = false;
                    console.log('ë°°íŒ… ì‹œì‘ ë²„íŠ¼ í™œì„±í™”ë¨');
                }
                
                // ì „ì—­ ë³€ìˆ˜ ì„¤ì •
                selectedGame = gameNumber;
                console.log('ì „ì—­ ë³€ìˆ˜ selectedGame ì„¤ì •ë¨:', selectedGame);
                
                        // ğŸ¯ ê²½ê¸° ì„ íƒ ëª¨ë‹¬ ìë™ìœ¼ë¡œ ë‹«ê¸°
        const gameSelectionModal = document.getElementById('gameSelectionModal');
        if (gameSelectionModal && gameSelectionModal.style.display === 'block') {
            gameSelectionModal.style.display = 'none';
            console.log('ê²½ê¸° ì„ íƒ ëª¨ë‹¬ ìë™ìœ¼ë¡œ ë‹«í˜');
        }
        
        // ğŸ¯ "ì„ íƒí•œ ê²½ê¸°" ë©”ë‰´ ì œëª©ì„ "í• ë‹¹ëœ ê²½ê¸°"ë¡œ ë³€ê²½
        const bettingTitle = document.querySelector('.betting-title');
        if (bettingTitle && bettingTitle.textContent === 'ì„ íƒëœ ê²½ê¸°') {
            bettingTitle.textContent = 'í• ë‹¹ëœ ê²½ê¸°';
            console.log('ë©”ë‰´ ì œëª©ì„ "í• ë‹¹ëœ ê²½ê¸°"ë¡œ ë³€ê²½');
        }
                
                console.log('ìë™ ì„ íƒëœ ê²½ê¸° ì •ë³´ í‘œì‹œ ì™„ë£Œ:', gameNumber);
                
            } catch (error) {
                console.error('ìë™ ì„ íƒëœ ê²½ê¸° ì •ë³´ í‘œì‹œ ì˜¤ë¥˜:', error);
            }
        }

        // ğŸ¯ ê²½ê¸° ìë™ ì„ íƒ API í˜¸ì¶œ
        async function autoSelectGame(date, gameNumber) {
            try {
                console.log(`ê²½ê¸° ìë™ ì„ íƒ ì‹œì‘: ${date} ${gameNumber}ê²½ê¸°`);
                
                const response = await fetch(`/api/team-games/${date}/${gameNumber}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ isSelected: true })
                });
                
                const result = await response.json();
                console.log('ê²½ê¸° ìë™ ì„ íƒ API ì‘ë‹µ:', result);
                
                if (result.success) {
                    console.log(`ê²½ê¸° ìë™ ì„ íƒ ì™„ë£Œ: ${date} ${gameNumber}ê²½ê¸°`);
                    return true;
                } else {
                    console.error('ê²½ê¸° ìë™ ì„ íƒ ì‹¤íŒ¨:', result.message);
                    return false;
                }
            } catch (error) {
                console.error('ê²½ê¸° ìë™ ì„ íƒ ì˜¤ë¥˜:', error);
                return false;
            }
        }

        // ê²Œì„ í‘œì‹œ
        function displayGames(games) {
            const gameSelectionTableBody = document.getElementById('gameSelectionTableBody');
            gameSelectionTableBody.innerHTML = '';

            for (let i = 1; i <= 5; i++) {
                const game = games.find(g => g.gameNumber === i) || {
                    gameNumber: i,
                    matchup: '- vs -',
                    startTime: '-',
                    endTime: '-',
                    gameStatus: 'ì •ìƒê²Œì„',
                    progressStatus: 'ê²½ê¸°ì „',
                    gameType: 'íƒ€ì',
                    bettingStart: 'ì¤‘ì§€',
                    bettingStop: 'ì¤‘ì§€',
                    predictionResult: ''
                };

                const gameStatus = game.gameStatus || 'ì •ìƒê²Œì„';
                const statusClass = getStatusClass(gameStatus);
                const progressText = game.progressStatus || 'ê²½ê¸°ì „';
                const progressClass = progressText === 'ê²½ê¸°ì „' ? 'status-before' : progressText === 'ê²½ê¸°ì¤‘' ? 'status-ongoing' : 'status-ended';

                const canSelect = gameStatus === 'ì •ìƒê²Œì„' && progressText === 'ê²½ê¸°ì¤‘';
                const buttonText = canSelect ? 'ì„ íƒ' : 'ì„ íƒë¶ˆê°€';
                const buttonDisabled = !canSelect;
                const buttonClass = canSelect ? 'select-game-btn' : 'select-game-btn disabled';

                const gameRow = document.createElement('tr');
                gameRow.className = 'game-row';
                gameRow.dataset.game = i;
                gameRow.innerHTML = `
                    <td class="game-number">${i}ê²½ê¸°</td>
                    <td class="game-matchup">${game.matchup}</td>
                    <td class="game-time">${game.startTime} ~ ${game.endTime}</td>
                    <td class="game-status ${statusClass}">${gameStatus}</td>
                    <td class="game-progress ${progressClass}">${progressText}</td>
                    <td>
                        <button class="${buttonClass}" data-game="${i}" ${buttonDisabled ? 'disabled' : ''}>${buttonText}</button>
                    </td>
                `;
                gameSelectionTableBody.appendChild(gameRow);

                const selectBtn = gameRow.querySelector('.select-game-btn');
                selectBtn.addEventListener('click', async function() {
                    if (this.disabled) return;
                    selectGame(i);
                });
            }
        }

        // ê²Œì„ ì„ íƒ
        async function selectGame(gameNumber) {
            try {
                // ì´ì „ ì„ íƒ í•´ì œ
                if (selectedGame && selectedGame !== gameNumber.toString()) {
                                document.querySelectorAll('.game-row').forEach(row => {
                                    row.classList.remove('selected');
                                });
                                document.querySelectorAll('.select-game-btn').forEach(btn => {
                                    btn.classList.remove('selected');
                                });
                }
                                
                // ìƒˆ ê²Œì„ ì„ íƒ
                selectedGame = gameNumber.toString();
                const gameRow = document.querySelector(`[data-game="${gameNumber}"]`);
                                gameRow.classList.add('selected');
                const selectBtn = gameRow.querySelector('.select-game-btn');
                                selectBtn.classList.add('selected');

                // ë°°íŒ… ì„¹ì…˜ í‘œì‹œ
                document.getElementById('bettingSection').style.display = 'block';
                document.getElementById('selectedGameInfo').textContent = `${gameNumber}ê²½ê¸°`;

                // ê²Œì„ í˜•íƒœ ìë™ ì„¤ì • (íƒ€ìë¡œ ê³ ì •)
                const gameTypeDisplay = document.querySelector('.game-type-value');
                if (gameTypeDisplay) {
                    gameTypeDisplay.textContent = 'íƒ€ì';
                }

                // ë°°íŒ… ì‹œì‘ ë²„íŠ¼ í™œì„±í™”
                document.getElementById('startBetting').disabled = false;

                showCustomModal(`${gameNumber}ê²½ê¸°ê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ë°°íŒ…ì„ ì‹œì‘í•´ì£¼ì„¸ìš”.`);

            } catch (error) {
                console.error('ê²Œì„ ì„ íƒ ì˜¤ë¥˜:', error);
                showCustomModal('ê²Œì„ ì„ íƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ìƒíƒœ í´ë˜ìŠ¤ ë°˜í™˜
        function getStatusClass(status) {
            switch (status) {
                case 'ì •ìƒê²Œì„': return 'status-normal';
                case 'ë¯¸ì„¸ë¨¼ì§€/ì´ˆë¯¸ì„¸ë¨¼ì§€/í™©ì‚¬': return 'status-delayed';
                case 'ì•ˆê°œ': return 'status-delayed';
                case 'ì²œì¬ì§€ë³€': return 'status-delayed';
                case 'ìš°ì²œ': return 'status-delayed';
                case 'í­ì—¼': return 'status-delayed';
                case 'ë²ˆê°œ/ì²œë‘¥': return 'status-delayed';
                case 'íƒœí’/ê°•í’': return 'status-delayed';
                case 'ê·¸ë¼ìš´ë“œ ìƒíƒœ': return 'status-delayed';
                case 'ì§€ì—°ê²Œì„': return 'status-delayed';
                case 'ê²½ê¸°ì „': return 'status-before';
                case 'ê²½ê¸°ì¤‘': return 'status-ongoing';
                case 'ê²½ê¸°ì¢…ë£Œ': return 'status-ended';
                default: return 'status-normal';
            }
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // ë°°íŒ…ì‹œì‘ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('startBetting').addEventListener('click', async function() {
                if (selectedGame) {
                    try {
                        // ë°°íŒ… ì‹œì‘ ì‹œê°„ ê¸°ë¡
                        bettingStartTime = new Date();
                        document.getElementById('bettingTime').textContent = bettingStartTime.toLocaleTimeString('ko-KR');
                        
                        // UI ìƒíƒœ ë³€ê²½
                        this.disabled = true;
                        document.getElementById('stopBetting').disabled = false;
                        
                        // ì˜ˆì¸¡ ê²°ê³¼ ì„ íƒ í™œì„±í™”
                        document.querySelectorAll('input[name="prediction"]').forEach(radio => {
                            radio.disabled = false;
                        });
                        
                        // team-games ì»¬ë ‰ì…˜ì— ë°°íŒ… ì‹œì‘ ìƒíƒœ ì—…ë°ì´íŠ¸
                        try {
                            const today = new Date();
                            const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
                            const dateStr = koreanTime.toISOString().split('T')[0];
                            
                            const response = await fetch(`/api/team-games/${dateStr}/${selectedGame}`, {
                            method: 'PUT',
                            headers: {
                                    'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                bettingStart: 'ì‹œì‘',
                                    bettingStop: 'ì§„í–‰'
                            })
                        });
                        
                            if (response.ok) {
                                console.log('ë°°íŒ… ì‹œì‘ ìƒíƒœ ì—…ë°ì´íŠ¸ ì„±ê³µ');
                        } else {
                                console.error('ë°°íŒ… ì‹œì‘ ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
                        }
                        } catch (error) {
                            console.error('ë°°íŒ… ì‹œì‘ ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                        }
                        
                        showCustomModal('ë°°íŒ…ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ê²Œì„ì—ì„œ ë°°íŒ…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    } catch (error) {
                        console.error('ë°°íŒ… ì‹œì‘ ì˜¤ë¥˜:', error);
                        showCustomModal('ë°°íŒ… ì‹œì‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                } else {
                    showCustomModal('ê²½ê¸°, ê²Œì„í˜•íƒœë¥¼ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.');
                }
            });

            // ë°°íŒ…ì¤‘ì§€ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('stopBetting').addEventListener('click', async function() {
                if (selectedGame) {
                    try {
                        // ë°°íŒ… ì¤‘ì§€ ì‹œê°„ ê¸°ë¡
                        bettingStopTime = new Date();
                        document.getElementById('stopTime').textContent = bettingStopTime.toLocaleTimeString('ko-KR');
                        
                        // UI ìƒíƒœ ë³€ê²½
                        this.disabled = true;
                        document.querySelectorAll('input[name="prediction"]').forEach(radio => {
                            radio.disabled = false;
                        });
                        document.getElementById('nextBatterBtn').disabled = true;
                        
                        // team-games ì»¬ë ‰ì…˜ì— ë°°íŒ… ì¤‘ì§€ ìƒíƒœ ì—…ë°ì´íŠ¸
                        try {
                            const today = new Date();
                            const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
                            const dateStr = koreanTime.toISOString().split('T')[0];
                            
                            const response = await fetch(`/api/team-games/${dateStr}/${selectedGame}`, {
                            method: 'PUT',
                            headers: {
                                    'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                bettingStart: 'ëŒ€ê¸°',
                                    bettingStop: 'ì¤‘ì§€'
                            })
                        });
                        
                            if (response.ok) {
                                console.log('ë°°íŒ… ì¤‘ì§€ ìƒíƒœ ì—…ë°ì´íŠ¸ ì„±ê³µ');
                        } else {
                                console.error('ë°°íŒ… ì¤‘ì§€ ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
                        }
                        } catch (error) {
                            console.error('ë°°íŒ… ì¤‘ì§€ ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                        }
                        
                        showCustomModal('ë°°íŒ…ì´ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì˜ˆì¸¡ê²°ê³¼ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    } catch (error) {
                        console.error('ë°°íŒ… ì¤‘ì§€ ì˜¤ë¥˜:', error);
                        showCustomModal('ë°°íŒ… ì¤‘ì§€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                }
            });

            // ì˜ˆì¸¡ê²°ê³¼ ë¼ë””ì˜¤ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.querySelectorAll('input[name="prediction"]').forEach(radio => {
                radio.addEventListener('change', async function() {
                    if (this.checked) {
                        const predictionText = this.nextElementSibling.textContent;
                        const predictionValue = this.value;
                        
                        showCustomModal(`${predictionText} ì˜ˆì¸¡ ê²°ê³¼ê°€ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                        
                        // ë‹¤ìŒ íƒ€ì ë²„íŠ¼ í™œì„±í™”
                        document.getElementById('nextBatterBtn').disabled = false;
                        
                        // team-games ì»¬ë ‰ì…˜ì— ì˜ˆì¸¡ ê²°ê³¼ ì—…ë°ì´íŠ¸
                        try {
                            const today = new Date();
                            const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
                            const dateStr = koreanTime.toISOString().split('T')[0];
                            
                            const response = await fetch(`/api/team-games/${dateStr}/${selectedGame}`, {
                                    method: 'PUT',
                                    headers: {
                                    'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({
                                        gameType: 'íƒ€ì',
                                        bettingStart: 'ëŒ€ê¸°',
                                        bettingStop: 'ëŒ€ê¸°',
                                    predictionResult: predictionValue
                                    })
                                });
                                
                            if (response.ok) {
                                console.log('ì˜ˆì¸¡ ê²°ê³¼ ì—…ë°ì´íŠ¸ ì„±ê³µ');
                                } else {
                                console.error('ì˜ˆì¸¡ ê²°ê³¼ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
                                }
                            } catch (error) {
                            console.error('ì˜ˆì¸¡ ê²°ê³¼ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                        }
                    }
                });
            });

            // ë‹¤ìŒíƒ€ì ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('nextBatterBtn').addEventListener('click', async function() {
                try {
                    // UI ì´ˆê¸°í™”
                    document.getElementById('startBetting').disabled = false;
                    document.getElementById('stopBetting').disabled = true;
                    document.querySelectorAll('input[name="prediction"]').forEach(radio => {
                        radio.checked = false;
                        radio.disabled = true;
                    });
                    this.disabled = true;
                    
                    // ì‹œê°„ ì´ˆê¸°í™”
                    document.getElementById('bettingTime').textContent = '-';
                    document.getElementById('stopTime').textContent = '-';
                    
                    // ê²Œì„ í˜•íƒœ ì´ˆê¸°í™”
                    document.querySelectorAll('input[name="gameType"]').forEach(radio => {
                        radio.checked = false;
                        radio.disabled = false;
                    });
                    
                    // team-games ì»¬ë ‰ì…˜ì— ë‹¤ìŒ íƒ€ì ì¤€ë¹„ ìƒíƒœ ì—…ë°ì´íŠ¸
                    try {
                        const today = new Date();
                        const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
                        const dateStr = koreanTime.toISOString().split('T')[0];
                        
                        const response = await fetch(`/api/team-games/${dateStr}/${selectedGame}`, {
                        method: 'PUT',
                        headers: {
                                'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                                gameType: 'íƒ€ì',
                            bettingStart: 'ëŒ€ê¸°',
                            bettingStop: 'ëŒ€ê¸°',
                            predictionResult: ''
                        })
                    });
                    
                        if (response.ok) {
                            console.log('ë‹¤ìŒ íƒ€ì ì¤€ë¹„ ìƒíƒœ ì—…ë°ì´íŠ¸ ì„±ê³µ');
                        } else {
                            console.error('ë‹¤ìŒ íƒ€ì ì¤€ë¹„ ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
                        }
                    } catch (error) {
                        console.error('ë‹¤ìŒ íƒ€ì ì¤€ë¹„ ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                    }
                    
                    showCustomModal('ë‹¤ìŒ íƒ€ì ë°°íŒ…ì„ ì¤€ë¹„í•©ë‹ˆë‹¤. ë°°íŒ…ì„ ì‹œì‘í•´ì£¼ì„¸ìš”.');
                } catch (error) {
                    console.error('ë‹¤ìŒíƒ€ì ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                }
            });
        }

        // ì»¤ìŠ¤í…€ ëª¨ë‹¬ í‘œì‹œ
        function showCustomModal(message, title = 'ì•Œë¦¼') {
            document.getElementById('customModalTitle').textContent = title;
            document.getElementById('customModalMessage').textContent = message;
            document.getElementById('customModal').style.display = 'block';
        }

        // ì»¤ìŠ¤í…€ ëª¨ë‹¬ ë‹«ê¸°
        function closeCustomModal() {
            document.getElementById('customModal').style.display = 'none';
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modal = document.getElementById('customModal');
            if (event.target === modal) {
                closeCustomModal();
            }
        }

        // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ í”Œë˜ê·¸ (ì¤‘ë³µ í˜¸ì¶œ ë°©ì§€)
        let loginStatusChecked = false;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ (í•œ ë²ˆë§Œ)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded ì´ë²¤íŠ¸ ë°œìƒ');
            
            // ğŸ¯ "ì˜¤ëŠ˜ì˜ ê²½ê¸°" ëª¨ë‹¬ ì¦‰ì‹œ ìˆ¨ê¸°ê¸°
            const gameSelectionModal = document.getElementById('gameSelectionModal');
            if (gameSelectionModal) {
                gameSelectionModal.style.display = 'none';
                console.log('DOMContentLoadedì—ì„œ ê²½ê¸° ì„ íƒ ëª¨ë‹¬ ìˆ¨ê¹€');
            }
            
            if (!loginStatusChecked) {
                console.log('DOMContentLoaded - ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸');
                checkLoginStatus();
                loginStatusChecked = true;
            }
        });
        
        // ğŸ¯ ëª¨ë‹¬ì„ ì™„ì „íˆ ìˆ¨ê¸°ëŠ” í•¨ìˆ˜ (ì—¬ëŸ¬ ê³³ì—ì„œ í˜¸ì¶œ)
        function forceHideGameModal() {
            const gameSelectionModal = document.getElementById('gameSelectionModal');
            if (gameSelectionModal) {
                // ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
                gameSelectionModal.style.display = 'none';
                gameSelectionModal.style.visibility = 'hidden';
                gameSelectionModal.style.opacity = '0';
                gameSelectionModal.style.zIndex = '-9999';
                gameSelectionModal.classList.add('hidden');
                console.log('forceHideGameModal: ê²½ê¸° ì„ íƒ ëª¨ë‹¬ ì™„ì „ ìˆ¨ê¹€ (ì—¬ëŸ¬ ë°©ë²•)');
            }
        }
        
        // ğŸ¯ ì£¼ê¸°ì ìœ¼ë¡œ ëª¨ë‹¬ ìˆ¨ê¸°ê¸° (0.5ì´ˆë§ˆë‹¤ ë” ë¹ ë¥´ê²Œ)
        setInterval(function() {
            forceHideGameModal();
        }, 500);
        
        // ğŸ¯ CSSë¡œ ëª¨ë‹¬ ì™„ì „ ìˆ¨ê¸°ê¸°
        const style = document.createElement('style');
        style.textContent = `
            #gameSelectionModal {
                display: none !important;
                visibility: hidden !important;
                opacity: 0 !important;
                z-index: -9999 !important;
                pointer-events: none !important;
            }
        `;
        document.head.appendChild(style);
        console.log('CSSë¡œ ê²½ê¸° ì„ íƒ ëª¨ë‹¬ ì™„ì „ ìˆ¨ê¹€ ì¶”ê°€ë¨');

        // í˜ì´ì§€ ì™„ì „ ë¡œë“œ ì‹œ ì¶”ê°€ ì‘ì—… (í•œ ë²ˆë§Œ)
        window.addEventListener('load', function() {
            console.log('load ì´ë²¤íŠ¸ ë°œìƒ');
            
            // ğŸ¯ load ì´ë²¤íŠ¸ì—ì„œë„ ëª¨ë‹¬ ê°•ì œ ìˆ¨ê¸°ê¸°
            forceHideGameModal();
            
            // load ì´ë²¤íŠ¸ì—ì„œëŠ” ì¶”ê°€ ì‘ì—…ë§Œ ìˆ˜í–‰ (ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ì€ í•˜ì§€ ì•ŠìŒ)
        });

        // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
        function checkLoginStatus() {
            // ì´ë¯¸ í™•ì¸ëœ ê²½ìš° ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
            if (loginStatusChecked) {
                console.log('ë¡œê·¸ì¸ ìƒíƒœ ì´ë¯¸ í™•ì¸ë¨ - ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€');
                return;
            }
            
            try {
                console.log('ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì‹œì‘...');
                
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
                const loginStatus = localStorage.getItem('operatorLoginStatus');
                const userInfo = localStorage.getItem('operatorUserInfo');
                
                console.log('ë¡œê·¸ì¸ ìƒíƒœ:', loginStatus);
                console.log('ì‚¬ìš©ì ì •ë³´:', userInfo);
                
                if (!loginStatus || loginStatus !== 'loggedIn' || !userInfo) {
                    console.log('ë¡œê·¸ì¸ë˜ì§€ ì•ŠìŒ - ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™');
                    // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš° ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                    window.location.href = '/operator-management.html';
                    return;
                }
                
                // ë¡œê·¸ì¸ëœ ê²½ìš° ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
                const userData = JSON.parse(userInfo);
                console.log('ì‚¬ìš©ì ë°ì´í„°:', userData);
                displayUserInfo(userData);
                
                // ê²Œì„ ë°ì´í„° ë¡œë“œ
                loadGameData();
                
                // ì¶”ê°€ ì´ˆê¸°í™” ì‘ì—…
                updateDate();
                setupEventListeners();
                
                // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì™„ë£Œ í”Œë˜ê·¸ ì„¤ì •
                loginStatusChecked = true;
                console.log('ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì™„ë£Œ');
                
            } catch (error) {
                console.error('ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:', error);
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                window.location.href = '/operator-management.html';
            }
        }

        // ê²Œì„ ë°ì´í„° ë¡œë“œ (team-games ì»¬ë ‰ì…˜ì—ì„œ ì‹¤ì œ ë°ì´í„° ì½ì–´ì˜¤ê¸°)
        async function loadGameData() {
            try {
                console.log('ê²Œì„ ë°ì´í„° ë¡œë“œ ì‹œì‘...');
                
                // ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ
                updateDate();
                
                // ì˜¤ëŠ˜ ë‚ ì§œ í˜•ì‹ (YYYY-MM-DD)
                const today = new Date();
                const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
                const dateStr = koreanTime.toISOString().split('T')[0];
                
                // team-games ì»¬ë ‰ì…˜ì—ì„œ ë°ì´í„° ì¡°íšŒ
                let games = [];
                try {
                    const response = await fetch(`/api/team-games/${dateStr}`);
                    if (response.ok) {
                        const data = await response.json();
                        if (data.success && data.data && data.data.length > 0) {
                            games = data.data;
                            console.log('team-gamesì—ì„œ ë°ì´í„° ì¡°íšŒ ì„±ê³µ:', games.length, 'ê°œ');
                            console.log('ì²« ë²ˆì§¸ ê²Œì„ ë°ì´í„° êµ¬ì¡°:', games[0]);
                            console.log('ëª¨ë“  ê²Œì„ ë°ì´í„°:', games);
                        } else {
                            console.log('team-gamesì— ë°ì´í„° ì—†ìŒ, ë¹ˆ ë°°ì—´ ì‚¬ìš©');
                            games = [];
                        }
                    } else {
                        console.log('team-games API í˜¸ì¶œ ì‹¤íŒ¨, ë¹ˆ ë°°ì—´ ì‚¬ìš©');
                        games = [];
                    }
                } catch (error) {
                    console.error('team-games API í˜¸ì¶œ ì˜¤ë¥˜:', error);
                    games = [];
                }
                
                // 5ê²½ê¸°ê¹Œì§€ í‘œì‹œ (ê´€ë¦¬ì í”„ë¡œê·¸ë¨ê³¼ ë™ì¼)
                const tableBody = document.getElementById('gameSelectionTableBody');
                if (!tableBody) {
                    console.error('ê²Œì„ í…Œì´ë¸” bodyë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                    return;
                }
                
                console.log('í…Œì´ë¸” body ì°¾ìŒ:', tableBody);
                tableBody.innerHTML = '';
                
                // 5ê²½ê¸°ê¹Œì§€ í‘œì‹œ
                for (let i = 1; i <= 5; i++) {
                    // team-gamesì—ì„œ í•´ë‹¹ ê²½ê¸° ë°ì´í„° ì°¾ê¸°
                    let game = games.find(g => g.gameNumber === i);
                    
                    // ë°ì´í„°ê°€ ì—†ê±°ë‚˜ í•„ìˆ˜ í•„ë“œê°€ ëˆ„ë½ëœ ê²½ìš° ê°œë³„ API í˜¸ì¶œë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                    if (!game || !game.matchup || !game.startTime) {
                        try {
                            const individualResponse = await fetch(`/api/team-games/${dateStr}/${i}`);
                            if (individualResponse.ok) {
                                const individualData = await individualResponse.json();
                                if (individualData.success && individualData.data) {
                                    game = individualData.data;
                                    console.log(`${i}ê²½ê¸°: ê°œë³„ APIë¡œ ë°ì´í„° ì¡°íšŒ ì„±ê³µ:`, game);
                                } else {
                                    console.log(`${i}ê²½ê¸°: ê°œë³„ APIì— ë°ì´í„° ì—†ìŒ`);
                                    continue; // ì´ ê²½ê¸°ëŠ” ê±´ë„ˆë›°ê¸°
                                }
                            } else {
                                console.log(`${i}ê²½ê¸°: ê°œë³„ API í˜¸ì¶œ ì‹¤íŒ¨`);
                                continue; // ì´ ê²½ê¸°ëŠ” ê±´ë„ˆë›°ê¸°
                            }
                        } catch (error) {
                            console.error(`${i}ê²½ê¸°: ê°œë³„ API í˜¸ì¶œ ì˜¤ë¥˜:`, error);
                            continue; // ì´ ê²½ê¸°ëŠ” ê±´ë„ˆë›°ê¸°
                        }
                    } else {
                        console.log(`${i}ê²½ê¸°: ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„° ì‚¬ìš©ë¨:`, game);
                    }

                    const gameStatus = game.gameStatus || 'ì •ìƒê²Œì„';
                    const statusClass = getStatusClass(gameStatus);
                    const progressText = game.progressStatus || 'ê²½ê¸°ì „';
                    const progressClass = progressText === 'ê²½ê¸°ì „' ? 'status-before' : progressText === 'ê²½ê¸°ì¤‘' ? 'status-ongoing' : 'status-ended';

                    const canSelect = gameStatus === 'ì •ìƒê²Œì„' && progressText === 'ê²½ê¸°ì¤‘';
                    const isCurrentlySelected = game.isSelected === true;
                    const buttonText = isCurrentlySelected ? 'ì„ íƒë¨' : (canSelect ? 'ì„ íƒ' : 'ì„ íƒë¶ˆê°€');
                    const buttonDisabled = !canSelect;
                    const buttonClass = isCurrentlySelected ? 'select-game-btn selected' : (canSelect ? 'select-game-btn' : 'select-game-btn disabled');

                    const gameRow = document.createElement('tr');
                    gameRow.className = 'game-row';
                    gameRow.dataset.game = i;
                    
                    // ì‹œê°„ ì •ë³´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
                    const startTime = game.startTime || '18:00';
                    const endTime = game.endTime;
                    let timeDisplay;
                    
                    if (endTime === null || endTime === undefined) {
                        // endTimeì´ nullì´ë©´ ì•„ì§ ê²½ê¸°ê°€ ì¢…ë£Œë˜ì§€ ì•Šì€ ìƒíƒœ
                        timeDisplay = `${startTime} ~ ì§„í–‰ì¤‘`;
                    } else {
                        timeDisplay = `${startTime} ~ ${endTime}`;
                    }
                    
                    gameRow.innerHTML = `
                        <td class="game-number">${i}ê²½ê¸°</td>
                        <td class="game-matchup">${game.matchup}</td>
                        <td class="game-time">${timeDisplay}</td>
                        <td class="game-status ${statusClass}">${gameStatus}</td>
                        <td class="game-progress ${progressClass}">${progressText}</td>
                        <td>
                            <button class="${buttonClass}" data-game="${i}" ${buttonDisabled ? 'disabled' : ''}>${buttonText}</button>
                        </td>
                    `;
                    tableBody.appendChild(gameRow);

                    // ê²Œì„ ì„ íƒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                    const selectBtn = gameRow.querySelector('.select-game-btn');
                    selectBtn.addEventListener('click', function() {
                        if (this.disabled) return;
                        
                        // ë””ë²„ê¹…: ê²Œì„ ë°ì´í„° í™•ì¸
                        console.log('í´ë¦­ëœ ê²Œì„ ë°ì´í„°:', game);
                        console.log('ê²Œì„ ë²ˆí˜¸ (i):', i);
                        console.log('ê²Œì„ ë§¤ì¹˜ì—…:', game.matchup);
                        console.log('ê²Œì„ ì‹œì‘ì‹œê°„:', game.startTime);
                        console.log('ê²Œì„ ì¢…ë£Œì‹œê°„:', game.endTime);
                        
                        // ì‹œê°„ ì •ë³´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
                        const startTime = game.startTime || '18:00';
                        const endTime = game.endTime;
                        let timeDisplay;
                        
                        if (endTime === null || endTime === undefined) {
                            // endTimeì´ nullì´ë©´ ì•„ì§ ê²½ê¸°ê°€ ì¢…ë£Œë˜ì§€ ì•Šì€ ìƒíƒœ
                            timeDisplay = `${startTime} ~ ì§„í–‰ì¤‘`;
                        } else {
                            timeDisplay = `${startTime} ~ ${endTime}`;
                        }
                        
                        // ë§¤ì¹˜ì—… ì •ë³´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
                        const matchup = game.matchup || `${i}ê²½ê¸°: ì›ì •íŒ€ vs í™ˆíŒ€`;
                        
                        console.log('ì²˜ë¦¬ëœ ë§¤ê°œë³€ìˆ˜:');
                        console.log('- gameId:', i);
                        console.log('- gameNumber:', `${i}ê²½ê¸°`);
                        console.log('- matchup:', matchup);
                        console.log('- timeDisplay:', timeDisplay);
                        
                        selectGame(i, `${i}ê²½ê¸°`, matchup, timeDisplay);
                    });
                }
                
                console.log('ê²Œì„ ë°ì´í„° ë¡œë“œ ì™„ë£Œ - ì´ 5ê°œ ê²½ê¸°');
                console.log('í…Œì´ë¸”ì— ì¶”ê°€ëœ í–‰ ìˆ˜:', tableBody.children.length);
                
                // ğŸ¯ ìë™ ê²½ê¸° ì„ íƒ ë¡œì§ ì¶”ê°€
                await autoSelectAssignedGame();
                
                // ğŸ¯ "ì˜¤ëŠ˜ì˜ ê²½ê¸°" ëª¨ë‹¬ ì™„ì „íˆ ìˆ¨ê¸°ê¸°
                hideGameSelectionModal();
                
            } catch (error) {
                console.error('ê²Œì„ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ë‚ ì§œ í‘œì‹œ ì—…ë°ì´íŠ¸ (ê´€ë¦¬ì í”„ë¡œê·¸ë¨ ë°©ì‹)
        function updateDate() {
            const today = new Date();
            const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            const dateStr = `${year}ë…„ ${month}ì›” ${day}ì¼`;
            document.getElementById('dateDisplay').textContent = dateStr;
        }

        // íŒ€ ë§¤ì¹˜ì—… ë°˜í™˜ í•¨ìˆ˜
        function getTeamMatchup(gameNumber) {
            const matchups = [
                'ì‚¼ì„± vs ë‘ì‚°',
                'LG vs í‚¤ì›€',
                'KT vs SSG',
                'í•œí™” vs NC',
                'ë¡¯ë° vs KIA'
            ];
            return matchups[gameNumber - 1] || 'ì›ì •íŒ€ vs í™ˆíŒ€';
        }

        // ê²Œì„ ìƒíƒœì— ë”°ë¥¸ CSS í´ë˜ìŠ¤ ë°˜í™˜
        function getStatusClass(status) {
            const statusMap = {
                'ì •ìƒê²Œì„': 'status-normal',
                'ì§€ì—°ê²Œì„': 'status-delayed',
                'ê²½ê¸°ì „': 'status-before',
                'ê²½ê¸°ì¤‘': 'ê²½ê¸°ì¤‘',
                'ê²½ê¸°ì¢…ë£Œ': 'status-ended'
            };
            return statusMap[status] || 'status-normal';
        }

        // ê²Œì„ ì„ íƒ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” loadGameDataì—ì„œ ì§ì ‘ ì„¤ì •

        // ê²½ê¸°ì„ íƒ ëª¨ë‹¬ í‘œì‹œ
        async function showGameSelection() {
            try {
                // í˜„ì¬ ì„ íƒëœ ê²Œì„ì´ ìˆìœ¼ë©´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì„ íƒ ìƒíƒœ í•´ì œ
                if (selectedGame) {
                    console.log('ì´ì „ ì„ íƒëœ ê²Œì„ ì„ íƒ í•´ì œ:', selectedGame);
                    
                    // ì˜¤ëŠ˜ ë‚ ì§œ í˜•ì‹ (YYYY-MM-DD)
                    const today = new Date();
                    const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
                    const dateStr = koreanTime.toISOString().split('T')[0];
                    
                    // team-games ì»¬ë ‰ì…˜ì—ì„œ ì„ íƒ ìƒíƒœ í•´ì œ
                    try {
                        const response = await fetch(`/api/team-games/${dateStr}/${selectedGame}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                isSelected: false,
                                bettingStart: 'ëŒ€ê¸°',
                                bettingStop: 'ëŒ€ê¸°',
                                predictionResult: ''
                            })
                        });
                        
                        if (response.ok) {
                            console.log('ì´ì „ ê²Œì„ ì„ íƒ ìƒíƒœ í•´ì œ ì„±ê³µ');
                        } else {
                            console.error('ì´ì „ ê²Œì„ ì„ íƒ ìƒíƒœ í•´ì œ ì‹¤íŒ¨');
                        }
                    } catch (error) {
                        console.error('ì´ì „ ê²Œì„ ì„ íƒ ìƒíƒœ í•´ì œ ì˜¤ë¥˜:', error);
                    }
                    
                    // ì „ì—­ ë³€ìˆ˜ ì´ˆê¸°í™”
                    selectedGame = null;
                }
                
                // ëª¨ë‹¬ì— ê²½ê¸° ë°ì´í„° ë¡œë“œ
                await loadGameDataForModal();
                
                // ê²½ê¸°ì„ íƒ ëª¨ë‹¬ í‘œì‹œ
                document.getElementById('gameSelectionModal').style.display = 'block';
                
                // ì„ íƒëœ ê²Œì„ ì •ë³´ ì´ˆê¸°í™” (í´ë¦­ ë¶ˆê°€ëŠ¥í•˜ê²Œ)
                const selectedGameInfo = document.getElementById('selectedGameInfo');
                selectedGameInfo.textContent = 'ê²Œì„ì„ ì„ íƒí•´ì£¼ì„¸ìš”';
                selectedGameInfo.className = 'betting-time';
                selectedGameInfo.onclick = null;
                
                // ëª¨ë“  ì„ íƒ ë²„íŠ¼ ì´ˆê¸°í™”
                document.querySelectorAll('.select-game-btn').forEach(btn => {
                    btn.classList.remove('selected');
                    btn.textContent = 'ì„ íƒ';
                });
                
                // ê²Œì„ í˜•íƒœ ì´ˆê¸°í™”
                const gameTypeDisplay = document.querySelector('.game-type-value');
                if (gameTypeDisplay) {
                    gameTypeDisplay.textContent = 'ê²Œì„ì„ ì„ íƒí•´ì£¼ì„¸ìš”';
                }
                
                // ë°°íŒ… ì‹œì‘/ì¤‘ì§€ ë²„íŠ¼ ë¹„í™œì„±í™”
                document.getElementById('startBetting').disabled = true;
                        document.getElementById('stopBetting').disabled = true;
                
                // ì˜ˆì¸¡ ê²°ê³¼ ì„ íƒ ë¹„í™œì„±í™”
                        document.querySelectorAll('input[name="prediction"]').forEach(radio => {
                            radio.checked = false;
                            radio.disabled = true;
                        });
                
                // ë‹¤ìŒ íƒ€ì ë²„íŠ¼ ë¹„í™œì„±í™”
                document.getElementById('nextBatterBtn').disabled = true;
                
                } catch (error) {
                console.error('ê²½ê¸°ì„ íƒ ëª¨ë‹¬ í‘œì‹œ ì˜¤ë¥˜:', error);
            }
        }

        // ëª¨ë‹¬ìš© ê²½ê¸° ë°ì´í„° ë¡œë“œ
        async function loadGameDataForModal() {
            try {
                console.log('ëª¨ë‹¬ìš© ê²½ê¸° ë°ì´í„° ë¡œë“œ ì‹œì‘...');
                
                // ì˜¤ëŠ˜ ë‚ ì§œ í˜•ì‹ (YYYY-MM-DD)
                const today = new Date();
                const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
                const dateStr = koreanTime.toISOString().split('T')[0];
                
                // team-games ì»¬ë ‰ì…˜ì—ì„œ ë°ì´í„° ì¡°íšŒ
                let games = [];
                try {
                    const response = await fetch(`/api/team-games/${dateStr}`);
                    if (response.ok) {
                        const data = await response.json();
                        if (data.success && data.data && data.data.length > 0) {
                            games = data.data;
                            console.log('ëª¨ë‹¬ìš© team-gamesì—ì„œ ë°ì´í„° ì¡°íšŒ ì„±ê³µ:', games.length, 'ê°œ');
                                                } else {
                            console.log('ëª¨ë‹¬ìš© team-gamesì— ë°ì´í„° ì—†ìŒ, ë¹ˆ ë°°ì—´ ì‚¬ìš©');
                            games = [];
                        }
                    } else {
                        console.log('ëª¨ë‹¬ìš© team-games API í˜¸ì¶œ ì‹¤íŒ¨, ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©');
                        // ê¸°ë³¸ ë°ì´í„° ìƒì„±
                        games = [];
                        for (let i = 1; i <= 5; i++) {
                                                    games.push({
                            gameNumber: i,
                            matchup: getTeamMatchup(i),
                            startTime: '18:00',
                            endTime: '21:00',
                            gameStatus: 'ì •ìƒê²Œì„',
                            progressStatus: 'ê²½ê¸°ì¤‘',
                            gameType: 'íƒ€ì',
                            bettingStart: 'ëŒ€ê¸°',
                            bettingStop: 'ëŒ€ê¸°',
                            predictionResult: '',
                            isSelected: false
                        });
                        }
                    }
                } catch (error) {
                    console.error('ëª¨ë‹¬ìš© team-games API í˜¸ì¶œ ì˜¤ë¥˜:', error);
                    // ì˜¤ë¥˜ ì‹œì—ë„ ê¸°ë³¸ ë°ì´í„° ìƒì„±
                    games = [];
                    for (let i = 1; i <= 5; i++) {
                        games.push({
                            gameNumber: i,
                            matchup: getTeamMatchup(i),
                            startTime: '18:00',
                            endTime: '21:00',
                            gameStatus: 'ì •ìƒê²Œì„',
                            progressStatus: 'ê²½ê¸°ì¤‘',
                            gameType: 'íƒ€ì',
                            bettingStart: 'ëŒ€ê¸°',
                            bettingStop: 'ëŒ€ê¸°',
                            predictionResult: '',
                            isSelected: false
                        });
                    }
                }
                
                // ëª¨ë‹¬ í…Œì´ë¸”ì— ë°ì´í„° í‘œì‹œ
                const tableBody = document.getElementById('modalGameSelectionTableBody');
                if (!tableBody) {
                    console.error('ëª¨ë‹¬ ê²Œì„ í…Œì´ë¸” bodyë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                    return;
                }
                
                console.log('ëª¨ë‹¬ í…Œì´ë¸” body ì°¾ìŒ:', tableBody);
                tableBody.innerHTML = '';
                
                // 5ê²½ê¸°ê¹Œì§€ í‘œì‹œ
                for (let i = 1; i <= 5; i++) {
                    // team-gamesì—ì„œ í•´ë‹¹ ê²½ê¸° ë°ì´í„° ì°¾ê¸°
                    let game = games.find(g => g.gameNumber === i);
                    
                    // ë°ì´í„°ê°€ ì—†ê±°ë‚˜ í•„ìˆ˜ í•„ë“œê°€ ëˆ„ë½ëœ ê²½ìš° ê°œë³„ API í˜¸ì¶œë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                    if (!game || !game.matchup || !game.startTime) {
                        try {
                            const individualResponse = await fetch(`/api/team-games/${dateStr}/${i}`);
                            if (individualResponse.ok) {
                                const individualData = await individualResponse.json();
                                if (individualData.success && individualData.data) {
                                    game = individualData.data;
                                    console.log(`ëª¨ë‹¬ìš© ${i}ê²½ê¸°: ê°œë³„ APIë¡œ ë°ì´í„° ì¡°íšŒ ì„±ê³µ:`, game);
                                } else {
                                    console.log(`ëª¨ë‹¬ìš© ${i}ê²½ê¸°: ê°œë³„ APIì— ë°ì´í„° ì—†ìŒ`);
                                    continue; // ì´ ê²½ê¸°ëŠ” ê±´ë„ˆë›°ê¸°
                                }
                            } else {
                                console.log(`ëª¨ë‹¬ìš© ${i}ê²½ê¸°: ê°œë³„ API í˜¸ì¶œ ì‹¤íŒ¨`);
                                continue; // ì´ ê²½ê¸°ëŠ” ê±´ë„ˆë›°ê¸°
                            }
                        } catch (error) {
                            console.error(`ëª¨ë‹¬ìš© ${i}ê²½ê¸°: ê°œë³„ API í˜¸ì¶œ ì˜¤ë¥˜:`, error);
                            continue; // ì´ ê²½ê¸°ëŠ” ê±´ë„ˆë›°ê¸°
                        }
                    } else {
                        console.log(`ëª¨ë‹¬ìš© ${i}ê²½ê¸°: ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„° ì‚¬ìš©ë¨:`, game);
                    }
                    
                    const gameStatus = game.gameStatus || 'ì •ìƒê²Œì„';
                    const statusClass = getStatusClass(gameStatus);
                    const progressText = game.progressStatus || 'ê²½ê¸°ì „';
                    const progressClass = progressText === 'ê²½ê¸°ì „' ? 'status-before' : progressText === 'ê²½ê¸°ì¤‘' ? 'status-ongoing' : 'status-ended';

                    const canSelect = gameStatus === 'ì •ìƒê²Œì„' && progressText === 'ê²½ê¸°ì¤‘';
                    const isCurrentlySelected = game.isSelected === true;
                    const buttonText = isCurrentlySelected ? 'ì„ íƒë¨' : (canSelect ? 'ì„ íƒ' : 'ì„ íƒë¶ˆê°€');
                    const buttonDisabled = !canSelect;
                    const buttonClass = isCurrentlySelected ? 'select-game-btn selected' : (canSelect ? 'select-game-btn' : 'select-game-btn disabled');

                    const gameRow = document.createElement('tr');
                    gameRow.className = 'game-row';
                    gameRow.dataset.game = i;
                    
                    // ì‹œê°„ ì •ë³´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
                    const startTime = game.startTime || '18:00';
                    const endTime = game.endTime;
                    let timeDisplay;
                    
                    if (endTime === null || endTime === undefined) {
                        // endTimeì´ nullì´ë©´ ì•„ì§ ê²½ê¸°ê°€ ì¢…ë£Œë˜ì§€ ì•Šì€ ìƒíƒœ
                        timeDisplay = `${startTime} ~ ì§„í–‰ì¤‘`;
                    } else {
                        timeDisplay = `${startTime} ~ ${endTime}`;
                    }
                    
                    gameRow.innerHTML = `
                        <td class="game-number">${i}ê²½ê¸°</td>
                        <td class="game-matchup">${game.matchup}</td>
                        <td class="game-time">${timeDisplay}</td>
                        <td class="game-status ${statusClass}">${gameStatus}</td>
                        <td class="game-progress ${progressClass}">${progressText}</td>
                        <td>
                            <button class="${buttonClass}" data-game="${i}" ${buttonDisabled ? 'disabled' : ''}>${buttonText}</button>
                        </td>
                    `;
                    tableBody.appendChild(gameRow);

                    // ê²Œì„ ì„ íƒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                    const selectBtn = gameRow.querySelector('.select-game-btn');
                    selectBtn.addEventListener('click', function() {
                        if (this.disabled) return;
                        
                        // ë””ë²„ê¹…: ê²Œì„ ë°ì´í„° í™•ì¸
                        console.log('ëª¨ë‹¬ì—ì„œ í´ë¦­ëœ ê²Œì„ ë°ì´í„°:', game);
                        console.log('ê²Œì„ ë²ˆí˜¸ (i):', i);
                        console.log('ê²Œì„ ë§¤ì¹˜ì—…:', game.matchup);
                        console.log('ê²Œì„ ì‹œì‘ì‹œê°„:', game.startTime);
                        console.log('ê²Œì„ ì¢…ë£Œì‹œê°„:', game.endTime);
                        
                        // ì‹œê°„ ì •ë³´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
                        const startTime = game.startTime || '18:00';
                        const endTime = game.endTime;
                        let timeDisplay;
                        
                        if (endTime === null || endTime === undefined) {
                            // endTimeì´ nullì´ë©´ ì•„ì§ ê²½ê¸°ê°€ ì¢…ë£Œë˜ì§€ ì•Šì€ ìƒíƒœ
                            timeDisplay = `${startTime} ~ ì§„í–‰ì¤‘`;
                        } else {
                            timeDisplay = `${startTime} ~ ${endTime}`;
                        }
                        
                        // ë§¤ì¹˜ì—… ì •ë³´ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
                        const matchup = game.matchup || `${i}ê²½ê¸°: ì›ì •íŒ€ vs í™ˆíŒ€`;
                        
                        console.log('ëª¨ë‹¬ì—ì„œ ì „ë‹¬í•  ë§¤ê°œë³€ìˆ˜:');
                        console.log('- gameId:', i);
                        console.log('- gameNumber:', `${i}ê²½ê¸°`);
                        console.log('- matchup:', matchup);
                        console.log('- timeDisplay:', timeDisplay);
                        
                        // ëª¨ë‹¬ ë‹«ê¸°
                        closeGameSelectionModal();
                        
                        // ê²Œì„ ì„ íƒ ì‹¤í–‰ (ëª¨ë“  ì •ë³´ í¬í•¨)
                        selectGame(i, `${i}ê²½ê¸°`, matchup, timeDisplay, game.progressStatus, game.gameStatus);
                    });
                }
                
                console.log('ëª¨ë‹¬ìš© ê²Œì„ ë°ì´í„° ë¡œë“œ ì™„ë£Œ - ì´ 5ê°œ ê²½ê¸°');
                console.log('ëª¨ë‹¬ í…Œì´ë¸”ì— ì¶”ê°€ëœ í–‰ ìˆ˜:', tableBody.children.length);
                
            } catch (error) {
                console.error('ëª¨ë‹¬ìš© ê²Œì„ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ê²½ê¸°ì„ íƒ ëª¨ë‹¬ ë‹«ê¸°
        function closeGameSelectionModal() {
            document.getElementById('gameSelectionModal').style.display = 'none';
        }

        // ê²Œì„ ì„ íƒ
        async function selectGame(gameId, gameNumber, matchup, time, progressStatus, gameStatus) {
            try {
                console.log('ê²Œì„ ì„ íƒ í•¨ìˆ˜ í˜¸ì¶œë¨:');
                console.log('- gameId:', gameId);
                console.log('- gameNumber:', gameNumber);
                console.log('- matchup:', matchup);
                console.log('- time:', time);
                console.log('- progressStatus:', progressStatus);
                console.log('- gameStatus:', gameStatus);
                
                // ë§¤ê°œë³€ìˆ˜ ê²€ì¦ ë° ê¸°ë³¸ê°’ ì„¤ì •
                if (!gameId || gameId === undefined) {
                    console.error('gameIdê°€ undefinedì…ë‹ˆë‹¤!');
                    return;
                }
                
                const safeGameNumber = gameNumber || `${gameId}ê²½ê¸°`;
                const safeMatchup = matchup || `${gameId}ê²½ê¸°: ì›ì •íŒ€ vs í™ˆíŒ€`;
                const safeTime = time || '18:00 ~ 21:00';
                
                console.log('ì•ˆì „í•œ ë§¤ê°œë³€ìˆ˜:');
                console.log('- safeGameNumber:', safeGameNumber);
                console.log('- safeMatchup:', safeMatchup);
                console.log('- safeTime:', safeTime);
                
                // selectedGame ë³€ìˆ˜ ì„¤ì • (ì „ì—­ ë³€ìˆ˜)
                selectedGame = gameId;
                
                // ì˜¤ëŠ˜ ë‚ ì§œ í˜•ì‹ (YYYY-MM-DD)
                const today = new Date();
                const koreanTime = new Date(today.getTime() + (9 * 60 * 60 * 1000));
                const dateStr = koreanTime.toISOString().split('T')[0];
                
                // team-games ì»¬ë ‰ì…˜ì— ê²Œì„ ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸
                try {
                    const response = await fetch(`/api/team-games/${dateStr}/${gameId}`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            isSelected: true,
                            bettingStart: 'ëŒ€ê¸°',
                            bettingStop: 'ëŒ€ê¸°',
                            predictionResult: ''
                        })
                    });
                    
                    if (response.ok) {
                        console.log('ê²Œì„ ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸ ì„±ê³µ');
                    } else {
                        console.error('ê²Œì„ ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
                    }
                } catch (error) {
                    console.error('ê²Œì„ ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
                }
                
                // ëª¨ë“  ì„ íƒ ë²„íŠ¼ ì´ˆê¸°í™”
                document.querySelectorAll('.select-game-btn').forEach(btn => {
                    btn.classList.remove('selected');
                    btn.textContent = 'ì„ íƒ';
                });
                
                // ì„ íƒëœ ê²Œì„ ë²„íŠ¼ í™œì„±í™” (data-game ì†ì„± ì‚¬ìš©)
                const selectedBtn = document.querySelector(`[data-game="${gameId}"]`);
                if (selectedBtn) {
                    selectedBtn.classList.add('selected');
                    selectedBtn.textContent = 'ì„ íƒë¨';
                }
                
                // ë‹¤ë¥¸ ê²½ê¸°ë“¤ì˜ ì„ íƒ ìƒíƒœë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í•´ì œ
                try {
                    for (let otherGameId = 1; otherGameId <= 5; otherGameId++) {
                        if (otherGameId !== gameId) {
                            const otherResponse = await fetch(`/api/team-games/${dateStr}/${otherGameId}`, {
                                method: 'PUT',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    isSelected: false
                                })
                            });
                            
                            if (otherResponse.ok) {
                                console.log(`${otherGameId}ê²½ê¸° ì„ íƒ ìƒíƒœ í•´ì œ ì„±ê³µ`);
                            }
                        }
                    }
                } catch (error) {
                    console.error('ë‹¤ë¥¸ ê²½ê¸° ì„ íƒ ìƒíƒœ í•´ì œ ì˜¤ë¥˜:', error);
                }
                
                // ì„ íƒëœ ê²Œì„ ì •ë³´ í‘œì‹œ (í´ë¦­ ê°€ëŠ¥í•˜ê²Œ)
                const selectedGameInfo = document.getElementById('selectedGameInfo');
                
                // ê²½ê¸° ìƒíƒœ ê²°ì • (ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ì •ë³´ ê¸°ë°˜)
                const actualProgressStatus = progressStatus || 'ê²½ê¸°ì¤‘';
                const actualGameStatus = gameStatus || 'ì •ìƒê²Œì„';
                
                // ìŠ¤ë§ˆíŠ¸í°ì—ì„œëŠ” ì¤„ë°”ê¿ˆìœ¼ë¡œ í‘œì‹œ, ë°ìŠ¤í¬í†±ì—ì„œëŠ” í•œ ì¤„ë¡œ í‘œì‹œ
                if (window.innerWidth <= 768) {
                    selectedGameInfo.innerHTML = `
                        <div style="text-align: center;">
                            <div style="font-size: 16px; font-weight: 600; margin-bottom: 6px; color: #333;">${safeMatchup}, ${safeTime}</div>
                            <div style="font-size: 14px; color: #666;">${actualGameStatus}, ${actualProgressStatus}</div>
                        </div>
                    `;
                } else {
                    selectedGameInfo.textContent = `${safeGameNumber} : ${safeMatchup}, ${safeTime}, ${actualGameStatus}, ${actualProgressStatus}`;
                }
                selectedGameInfo.className = 'betting-time clickable-game-info';
                selectedGameInfo.onclick = showGameSelection;
                
                // ë°°íŒ… ì„¹ì…˜ í‘œì‹œ
                document.getElementById('bettingSection').style.display = 'block';
                
                // ê²Œì„ í˜•íƒœ ìë™ ì„¤ì • (íƒ€ìë¡œ ê³ ì •)
                const gameTypeDisplay = document.querySelector('.game-type-value');
                if (gameTypeDisplay) {
                    gameTypeDisplay.textContent = 'íƒ€ì';
                }
                
                // ë°°íŒ… ì‹œì‘ ë²„íŠ¼ í™œì„±í™”
                document.getElementById('startBetting').disabled = false;
                
                // ì˜ˆì¸¡ ê²°ê³¼ ì„ íƒ ì´ˆê¸°í™”
                document.querySelectorAll('input[name="prediction"]').forEach(radio => {
                    radio.checked = false;
                    radio.disabled = true;
                });
                
                // ë‹¤ìŒ íƒ€ì ë²„íŠ¼ ë¹„í™œì„±í™”
                document.getElementById('nextBatterBtn').disabled = true;
                
                // ê²½ê¸°ì„ íƒ ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                document.querySelector('.game-section').style.display = 'none';
                
                // ì•Œë¦¼ ì—†ì´ ê²Œì„ ìš´ì˜ í™”ë©´ìœ¼ë¡œ ì´ë™
                
            } catch (error) {
                console.error('ê²Œì„ ì„ íƒ ì˜¤ë¥˜:', error);
            }
        }

        // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
        function displayUserInfo(userData) {
            // ë„¤ë¹„ê²Œì´ì…˜ ë°”ì— ì‚¬ìš©ì ì •ë³´ë§Œ í‘œì‹œ (ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì€ ë³„ë„ë¡œ ì¡´ì¬)
            const userNameElement = document.getElementById('userName');
            if (userNameElement) {
                userNameElement.innerHTML = `<i class="fas fa-user-circle me-2"></i>ìš´ì˜ì : ${userData.name}(${userData.username})`;
            }
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¡œê·¸ì¸ ì •ë³´ ì œê±°
            localStorage.removeItem('operatorLoginStatus');
            localStorage.removeItem('operatorUserInfo');
            
            // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = '/operator-management.html';
        }

        // ğŸ¯ ê²½ê¸° ì„ íƒ ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
        function hideGameSelectionModal() {
            const gameSelectionModal = document.getElementById('gameSelectionModal');
            if (gameSelectionModal) {
                gameSelectionModal.style.display = 'none';
                console.log('ê²½ê¸° ì„ íƒ ëª¨ë‹¬ ìˆ¨ê¹€');
            }
        }

        // ğŸ¯ ë°°íŒ… ì„¹ì…˜ í‘œì‹œ
        function showBettingSection() {
            const bettingSection = document.getElementById('bettingSection');
            if (bettingSection) {
                bettingSection.style.display = 'block';
                console.log('ë°°íŒ… ì„¹ì…˜ í‘œì‹œ');
            }
        }

        // ğŸ¯ ê²½ê¸° ìë™ ì„ íƒ API í˜¸ì¶œ
        async function autoSelectGame(date, gameNumber) {
            try {
                console.log(`ê²½ê¸° ìë™ ì„ íƒ ì‹œì‘: ${date} ${gameNumber}ê²½ê¸°`);
                
                const response = await fetch(`/api/team-games/${date}/${gameNumber}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ isSelected: true })
                });
                
                const result = await response.json();
                console.log('ê²½ê¸° ìë™ ì„ íƒ API ì‘ë‹µ:', result);
                
                if (result.success) {
                    console.log(`ê²½ê¸° ìë™ ì„ íƒ ì™„ë£Œ: ${date} ${gameNumber}ê²½ê¸°`);
                    return true;
                } else {
                    console.error('ê²½ê¸° ìë™ ì„ íƒ ì‹¤íŒ¨:', result.message);
                    return false;
                }
            } catch (error) {
                console.error('ê²½ê¸° ìë™ ì„ íƒ ì˜¤ë¥˜:', error);
                return false;
            }
        }

        // ğŸ¯ ê²½ê¸° ì„ íƒ í´ë¦­ ì²˜ë¦¬ (ìš´ì˜ì ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼)
        function handleGameSelectionClick() {
            // ìš´ì˜ì ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
            const userInfo = localStorage.getItem('operatorUserInfo');
            if (userInfo) {
                // ìš´ì˜ìê°€ ë¡œê·¸ì¸ëœ ê²½ìš°: ëª¨ë‹¬ í‘œì‹œí•˜ì§€ ì•ŠìŒ
                console.log('ìš´ì˜ìê°€ ë¡œê·¸ì¸ë˜ì–´ ìˆì–´ ëª¨ë‹¬ì„ í‘œì‹œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            } else {
                // ìš´ì˜ìê°€ ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ê²½ìš°: ê¸°ì¡´ ëª¨ë‹¬ í‘œì‹œ
                console.log('ìš´ì˜ìê°€ ë¡œê·¸ì¸ë˜ì§€ ì•Šì•„ ëª¨ë‹¬ì„ í‘œì‹œí•©ë‹ˆë‹¤.');
                showGameSelection();
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 